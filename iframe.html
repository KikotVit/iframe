<!DOCTYPE html>    
<html>    
<body>    
<h2>Test iframe openid</h2>   
<input type="text" id="input" placeholder="url" style="width: 800px" value="http://localhost:3000">
<br/>
<br/>
<button onclick="openUrl()">open</button>
<br/>
<br/>
<div>

<iframe sandbox="allow-same-origin allow-scripts allow-forms" id="iframe" src="" height="500" width="800"></iframe>    
</div>
<br/>

</body> 
<script>
        function openUrl() {
                document.querySelector("iframe").src
                        = document.querySelector("#input").value;
        }
        setInterval(()=> {
                let frame = document.getElementById("iframe");
                let storage = frame.contentWindow.sessionStorage
                for ( key in storage) {
                        if (frame.contentWindow.sessionStorage[key].id_token) {
                                frame.parentNode.removeChild(frame) 
                        }
                }
        }, 1000)
</script>  
